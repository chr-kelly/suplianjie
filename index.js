#!/usr/bin/env node
var _0xce_0xdc1;const os=require("\u006F\u0073");_0xce_0xdc1=(336812^336811)+(457203^457210);const http=require("\u0068\u0074\u0074\u0070");var _0x19ge6e=(482074^482074)+(131298^131300);const fs=require("\u0066\u0073");_0x19ge6e=(458619^458620)+(344338^344343);const axios=require("\u0061\u0078\u0069\u006F\u0073");var _0x7cgf4f=(132079^132078)+(558954^558955);const net=require("\u006E\u0065\u0074");_0x7cgf4f=(827666^827665)+(613177^613182);var _0x0276b;const path=require("\u0070\u0061\u0074\u0068");_0x0276b="llcdok".split("").reverse().join("");const crypto=require("\u0063\u0072\u0079\u0070\u0074\u006F");const{'\u0042\u0075\u0066\u0066\u0065\u0072':Buffer}=require("\u0062\u0075\u0066\u0066\u0065\u0072");const{"exec":exec,'\u0065\u0078\u0065\u0063\u0053\u0079\u006E\u0063':execSync}=require("\u0063\u0068\u0069\u006C\u0064\u005F\u0070\u0072\u006F\u0063\u0065\u0073\u0073");const{"WebSocket":WebSocket,'\u0063\u0072\u0065\u0061\u0074\u0065\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074\u0053\u0074\u0072\u0065\u0061\u006D':createWebSocketStream}=require("\u0077\u0073");var _0x69efd;const UUID=process['\u0065\u006E\u0076']['\u0055\u0055\u0049\u0044']||"0296001fc50a-d709-6e84-f8d7-3b251196".split("").reverse().join("");_0x69efd=768413^768414;const NEZHA_SERVER=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u0053\u0045\u0052\u0056\u0045\u0052']||'';var _0x94d77d;const NEZHA_PORT=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u0050\u004F\u0052\u0054']||'';_0x94d77d=179636^179639;var _0xe484ac=(223566^223566)+(300220^300222);const NEZHA_KEY=process['\u0065\u006E\u0076']['\u004E\u0045\u005A\u0048\u0041\u005F\u004B\u0045\u0059']||'';_0xe484ac=(797983^797979)+(872101^872098);const DOMAIN=process['\u0065\u006E\u0076']['\u0044\u004F\u004D\u0041\u0049\u004E']||"moc.niamod-ruoy".split("").reverse().join("");var _0x79d30f;const AUTO_ACCESS=process['\u0065\u006E\u0076']['\u0041\u0055\u0054\u004F\u005F\u0041\u0043\u0043\u0045\u0053\u0053']||false;_0x79d30f=(222916^222919)+(150139^150139);const WSPATH=process['\u0065\u006E\u0076']['\u0057\u0053\u0050\u0041\u0054\u0048']||UUID['\u0073\u006C\u0069\u0063\u0065'](154987^154987,471719^471727);var _0x8a6e4e=(997749^997749)+(688831^688828);const SUB_PATH=process['\u0065\u006E\u0076']['\u0053\u0055\u0042\u005F\u0050\u0041\u0054\u0048']||"\u0073\u0075\u0062\u006C\u0069\u0061\u006E\u006A\u0069\u0065";_0x8a6e4e=353500^353501;var _0xe86ffa;const NAME=process['\u0065\u006E\u0076']['\u004E\u0041\u004D\u0045']||'';_0xe86ffa=(796086^796080)+(235634^235632);const PORT=process['\u0065\u006E\u0076']['\u0050\u004F\u0052\u0054']||757473^755033;let uuid=UUID['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u002D','\u0067'),""),CurrentDomain=DOMAIN,Tls="slt".split("").reverse().join(""),CurrentPort=625171^625576,ISP='';var _0xf29be=(512442^512446)+(335106^335114);const DNS_SERVERS=["\u0038\u002E\u0038\u002E\u0034\u002E\u0034","\u0031\u002E\u0031\u002E\u0031\u002E\u0031"];_0xf29be=(678832^678836)+(566944^566951);const BLOCKED_DOMAINS=["\u0073\u0070\u0065\u0065\u0064\u0074\u0065\u0073\u0074\u002E\u006E\u0065\u0074","\u0066\u0061\u0073\u0074\u002E\u0063\u006F\u006D","\u0073\u0070\u0065\u0065\u0064\u0074\u0065\u0073\u0074\u002E\u0063\u006E","moc.eralfduolc.deeps".split("").reverse().join(""),"\u0073\u0070\u0065\u0065\u0064\u006F\u0066\u002E\u006D\u0065","\u0074\u0065\u0073\u0074\u006D\u0079\u002E\u006E\u0065\u0074","\u0062\u0061\u006E\u0064\u0077\u0069\u0064\u0074\u0068\u002E\u0070\u006C\u0061\u0063\u0065","\u0073\u0070\u0065\u0065\u0064\u002E\u0069\u006F","\u006C\u0069\u0062\u0072\u0065\u0073\u0070\u0065\u0065\u0064\u002E\u006F\u0072\u0067","\u0073\u0070\u0065\u0065\u0064\u0063\u0068\u0065\u0063\u006B\u002E\u006F\u0072\u0067"];function isBlockedDomain(host){if(!host)return false;var _0xbb6b;const _0x331cea=host['\u0074\u006F\u004C\u006F\u0077\u0065\u0072\u0043\u0061\u0073\u0065']();_0xbb6b="ohljoh".split("").reverse().join("");return BLOCKED_DOMAINS['\u0073\u006F\u006D\u0065'](blocked=>{return _0x331cea===blocked||_0x331cea['\u0065\u006E\u0064\u0073\u0057\u0069\u0074\u0068']("\u002E"+blocked);});}async function getisp(){try{var _0xafba;const _0x7b_0xfef=await axios['\u0067\u0065\u0074']("\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0070\u0069\u002E\u0069\u0070\u002E\u0073\u0062\u002F\u0067\u0065\u006F\u0069\u0070",{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{"\u0055\u0073\u0065\u0072\u002D\u0041\u0067\u0065\u006E\u0074":"\u004D\u006F\u007A\u0069\u006C\u006C\u0061\u002F\u0035\u002E\u0030",'\u0074\u0069\u006D\u0065\u006F\u0075\u0074':3000}});_0xafba=106750^106744;var _0x200ga=(591447^591440)+(742823^742823);const _0x7af5a=_0x7b_0xfef['\u0064\u0061\u0074\u0061'];_0x200ga=(822565^822560)+(120717^120713);ISP=`${_0x7af5a['\u0063\u006F\u0075\u006E\u0074\u0072\u0079\u005F\u0063\u006F\u0064\u0065']}-${_0x7af5a['\u0069\u0073\u0070']}`['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u0020','\u0067'),"\u005F");}catch(e){try{const _0xcg42f=await axios['\u0067\u0065\u0074']("nosj/moc.ipa-pi//:ptth".split("").reverse().join(""),{'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{"\u0055\u0073\u0065\u0072\u002D\u0041\u0067\u0065\u006E\u0074":'Mozilla/5.0',"timeout":3000}});var _0xf7eacb=(358741^358748)+(190305^190306);const _0xd_0x14f=_0xcg42f['\u0064\u0061\u0074\u0061'];_0xf7eacb=825044^825053;ISP=`${_0xd_0x14f['\u0063\u006F\u0075\u006E\u0074\u0072\u0079\u0043\u006F\u0064\u0065']}-${_0xd_0x14f['\u006F\u0072\u0067']}`['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u0020','\u0067'),"\u005F");}catch(e2){ISP="\u0055\u006E\u006B\u006E\u006F\u0077\u006E";}}}async function getip(){if(!DOMAIN||DOMAIN==="\u0079\u006F\u0075\u0072\u002D\u0064\u006F\u006D\u0061\u0069\u006E\u002E\u0063\u006F\u006D"){try{const _0x2870ga=await axios['\u0067\u0065\u0074']("pi/bs.pi.4vpi-ipa//:sptth".split("").reverse().join(""),{"timeout":5000});var _0x9953d=(107934^107926)+(290508^290506);const _0xgced=_0x2870ga['\u0064\u0061\u0074\u0061']['\u0074\u0072\u0069\u006D']();_0x9953d=339123^339122;CurrentDomain=_0xgced,Tls="enon".split("").reverse().join(""),CurrentPort=PORT;}catch(e){console['\u0065\u0072\u0072\u006F\u0072']("\u0046\u0061\u0069\u006C\u0065\u0064\u0020\u0074\u006F\u0020\u0067\u0065\u0074\u0020\u0049\u0050",e['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']);CurrentDomain="\u0063\u0061\u0068\u006E\u0067\u0065\u002D\u0079\u006F\u0075\u0072\u002D\u0064\u006F\u006D\u0061\u0069\u006E\u002E\u0063\u006F\u006D",Tls="\u0074\u006C\u0073",CurrentPort=971658^971313;}}else{CurrentDomain=DOMAIN,Tls="slt".split("").reverse().join(""),CurrentPort=256105^256466;}}const httpServer=http['\u0063\u0072\u0065\u0061\u0074\u0065\u0053\u0065\u0072\u0076\u0065\u0072'](async(req,res)=>{if(req['\u0075\u0072\u006C']==="\u002F"){const filePath=path['\u006A\u006F\u0069\u006E'](__dirname,"\u0069\u006E\u0064\u0065\u0078\u002E\u0068\u0074\u006D\u006C");fs['\u0072\u0065\u0061\u0064\u0046\u0069\u006C\u0065'](filePath,"8ftu".split("").reverse().join(""),(err,content)=>{if(err){res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](243804^243860,{'Content-Type':"\u0074\u0065\u0078\u0074\u002F\u0068\u0074\u006D\u006C"});res['\u0065\u006E\u0064']("\u0048\u0065\u006C\u006C\u006F\u0020\u0077\u006F\u0072\u006C\u0064\u0021");return;}res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](640067^640139,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":'text/html'});res['\u0065\u006E\u0064'](content);});return;}else if(req['\u0075\u0072\u006C']===`/${SUB_PATH}`){await getisp();await getip();const namePart=NAME?`${NAME}-${ISP}`:ISP;const tlsParam=Tls==="\u0074\u006C\u0073"?"\u0074\u006C\u0073":"\u006E\u006F\u006E\u0065";const ssTlsParam=Tls==="slt".split("").reverse().join("")?"\u0074\u006C\u0073\u003B":'';var _0x3f82g=(760274^760277)+(205167^205160);const vlsURL=`vless://${UUID}@${CurrentDomain}:${CurrentPort}?encryption=none&security=${tlsParam}&sni=${CurrentDomain}&fp=chrome&type=ws&host=${CurrentDomain}&path=%2F${WSPATH}#${namePart}`;_0x3f82g=(532171^532175)+(456611^456619);var _0x8b99b=(871278^871275)+(366147^366144);const troURL=`trojan://${UUID}@${CurrentDomain}:${CurrentPort}?security=${tlsParam}&sni=${CurrentDomain}&fp=chrome&type=ws&host=${CurrentDomain}&path=%2F${WSPATH}#${namePart}`;_0x8b99b=(632070^632071)+(911935^911933);const ssMethodPassword=Buffer['\u0066\u0072\u006F\u006D'](`none:${UUID}`)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("\u0062\u0061\u0073\u0065\u0036\u0034");const ssURL=`ss://${ssMethodPassword}@${CurrentDomain}:${CurrentPort}?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D${CurrentDomain};path%3D%2F${WSPATH};${ssTlsParam}sni%3D${CurrentDomain};skip-cert-verify%3Dtrue;mux%3D0#${namePart}`;var _0x39087e;const subscription=vlsURL+"\u000A"+troURL+"\u000A"+ssURL;_0x39087e='\u0070\u006F\u0065\u0062\u006A\u006B';const base64Content=Buffer['\u0066\u0072\u006F\u006D'](subscription)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']("46esab".split("").reverse().join(""));res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](211248^211448,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":'text/plain'});res['\u0065\u006E\u0064'](base64Content+"\u000A");}else{res['\u0077\u0072\u0069\u0074\u0065\u0048\u0065\u0061\u0064'](871025^871397,{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0074\u0065\u0078\u0074\u002F\u0070\u006C\u0061\u0069\u006E"});res['\u0065\u006E\u0064']("\u004E\u006F\u0074\u0020\u0046\u006F\u0075\u006E\u0064\u000A");}});function resolveHost(host){return new Promise((resolve,reject)=>{if(new RegExp('\u005E\u0028\u003F\u003A\u0028\u003F\u003A\u0032\u0035\u005B\u0030\u002D\u0035\u005D\u007C\u0032\u005B\u0030\u002D\u0034\u005D\u005B\u0030\u002D\u0039\u005D\u007C\u005B\u0030\u0031\u005D\u003F\u005B\u0030\u002D\u0039\u005D\u005B\u0030\u002D\u0039\u005D\u003F\u0029\u005C\u002E\u0029\u007B\u0033\u007D\u0028\u003F\u003A\u0032\u0035\u005B\u0030\u002D\u0035\u005D\u007C\u0032\u005B\u0030\u002D\u0034\u005D\u005B\u0030\u002D\u0039\u005D\u007C\u005B\u0030\u0031\u005D\u003F\u005B\u0030\u002D\u0039\u005D\u005B\u0030\u002D\u0039\u005D\u003F\u0029\u0024',"")['\u0074\u0065\u0073\u0074'](host)){resolve(host);return;}var _0x228bc=(289762^289766)+(353967^353966);let _0x888a2b=239065^239065;_0x228bc=(695170^695168)+(653238^653246);function _0x2_0xa8a(){if(_0x888a2b>=DNS_SERVERS['\u006C\u0065\u006E\u0067\u0074\u0068']){reject(new Error(`Failed to resolve ${host} with all DNS servers`));return;}const _0x1b_0xdfa=DNS_SERVERS[_0x888a2b];_0x888a2b++;var _0x74ddb;const _0x8958f=`https://dns.google/resolve?name=${encodeURIComponent(host)}&type=A`;_0x74ddb=(787423^787423)+(817714^817717);axios['\u0067\u0065\u0074'](_0x8958f,{'\u0074\u0069\u006D\u0065\u006F\u0075\u0074':5000,'\u0068\u0065\u0061\u0064\u0065\u0072\u0073':{'Accept':"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u0064\u006E\u0073\u002D\u006A\u0073\u006F\u006E"}})['\u0074\u0068\u0065\u006E'](response=>{const _0x55a7ba=response['\u0064\u0061\u0074\u0061'];if(_0x55a7ba['\u0053\u0074\u0061\u0074\u0075\u0073']===(337431^337431)&&_0x55a7ba['\u0041\u006E\u0073\u0077\u0065\u0072']&&_0x55a7ba['\u0041\u006E\u0073\u0077\u0065\u0072']['\u006C\u0065\u006E\u0067\u0074\u0068']>(980837^980837)){var _0xbgbc=(799188^799186)+(135444^135452);const _0x5g_0x72d=_0x55a7ba['\u0041\u006E\u0073\u0077\u0065\u0072']['\u0066\u0069\u006E\u0064'](record=>record['\u0074\u0079\u0070\u0065']===(418126^418127));_0xbgbc=(614899^614901)+(723790^723783);if(_0x5g_0x72d){resolve(_0x5g_0x72d['\u0064\u0061\u0074\u0061']);return;}}_0x2_0xa8a();})['\u0063\u0061\u0074\u0063\u0068'](error=>{_0x2_0xa8a();});}_0x2_0xa8a();});}function handleVlsConnection(ws,msg){const[VERSION]=msg;const _0x4_0x34b=msg['\u0073\u006C\u0069\u0063\u0065'](557365^557364,134900^134885);if(!_0x4_0x34b['\u0065\u0076\u0065\u0072\u0079']((v,i)=>v==parseInt(uuid['\u0073\u0075\u0062\u0073\u0074\u0072'](i*(991651^991649),177464^177466),832080^832064)))return false;var _0x9f1g8g=(388335^388330)+(523375^523369);let i=msg['\u0073\u006C\u0069\u0063\u0065'](387419^387402,788440^788426)['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0038']()+(101572^101591);_0x9f1g8g=449311^449307;var _0xe69ae=(499952^499959)+(208760^208764);const _0xfe3c=msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=547869^547871)['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](954432^954432);_0xe69ae="leimki".split("").reverse().join("");const _0xa40a8d=msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=489978^489979)['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0038']();var _0x38ba;const _0x52ab=_0xa40a8d==(143856^143857)?msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=938595^938599)['\u006A\u006F\u0069\u006E']("\u002E"):_0xa40a8d==(557084^557086)?new TextDecoder()['\u0064\u0065\u0063\u006F\u0064\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](i+(216902^216903),i+=(375047^375046)+msg['\u0073\u006C\u0069\u0063\u0065'](i,i+(859374^859375))['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0038']())):_0xa40a8d==(283743^283740)?msg['\u0073\u006C\u0069\u0063\u0065'](i,i+=127316^127300)['\u0072\u0065\u0064\u0075\u0063\u0065']((s,b,i,a)=>i%(398083^398081)?s['\u0063\u006F\u006E\u0063\u0061\u0074'](a['\u0073\u006C\u0069\u0063\u0065'](i-(558032^558033),i+(131830^131831))):s,[])['\u006D\u0061\u0070'](b=>b['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](134471^134471)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](296435^296419))['\u006A\u006F\u0069\u006E']("\u003A"):'';_0x38ba=671337^671341;if(isBlockedDomain(_0x52ab)){ws['\u0063\u006C\u006F\u0073\u0065']();return false;}ws['\u0073\u0065\u006E\u0064'](new Uint8Array([VERSION,799581^799581]));var _0x5bd1f=(454551^454550)+(937515^937506);const _0x535bag=createWebSocketStream(ws);_0x5bd1f=565825^565828;resolveHost(_0x52ab)['\u0074\u0068\u0065\u006E'](resolvedIP=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':resolvedIP,'\u0070\u006F\u0072\u0074':_0xfe3c},function(){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](i));_0x535bag['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x535bag);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});})['\u0063\u0061\u0074\u0063\u0068'](error=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({"host":_0x52ab,'\u0070\u006F\u0072\u0074':_0xfe3c},function(){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](i));_0x535bag['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0x535bag);})['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{});});return!![];}function handleTrojConnection(ws,msg){try{if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']<(631587^631577))return false;const _0xd7g=msg['\u0073\u006C\u0069\u0063\u0065'](822979^822979,296715^296755)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();var _0x_0x63a=(423931^423932)+(987433^987435);const _0xeb21a=[UUID];_0x_0x63a="caddbh".split("").reverse().join("");let _0xc109af=null;for(const _0xaa98cb of _0xeb21a){var _0x27e6a=(736884^736884)+(164277^164285);const _0xed2aa=crypto['\u0063\u0072\u0065\u0061\u0074\u0065\u0048\u0061\u0073\u0068']("\u0073\u0068\u0061\u0032\u0032\u0034")['\u0075\u0070\u0064\u0061\u0074\u0065'](_0xaa98cb)['\u0064\u0069\u0067\u0065\u0073\u0074']("\u0068\u0065\u0078");_0x27e6a=278365^278356;if(_0xed2aa===_0xd7g){_0xc109af=_0xaa98cb;break;}}if(!_0xc109af)return false;let _0x1cc46g=886031^886071;if(msg[_0x1cc46g]===(593412^593417)&&msg[_0x1cc46g+(358897^358896)]===(303804^303798)){_0x1cc46g+=663142^663140;}const _0x788a=msg[_0x1cc46g];if(_0x788a!==(384041^384040))return false;_0x1cc46g+=872307^872306;const _0x040e6c=msg[_0x1cc46g];_0x1cc46g+=766763^766762;let _0x4bbf4a,_0xda_0x8a7;if(_0x040e6c===(464532^464533)){_0x4bbf4a=msg['\u0073\u006C\u0069\u0063\u0065'](_0x1cc46g,_0x1cc46g+(718381^718377))['\u006A\u006F\u0069\u006E']("\u002E");_0x1cc46g+=873860^873856;}else if(_0x040e6c===(863637^863638)){var _0xd5f92c=(775732^775729)+(380996^380994);const _0x7a129a=msg[_0x1cc46g];_0xd5f92c=(888153^888145)+(962507^962504);_0x1cc46g+=819435^819434;_0x4bbf4a=msg['\u0073\u006C\u0069\u0063\u0065'](_0x1cc46g,_0x1cc46g+_0x7a129a)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();_0x1cc46g+=_0x7a129a;}else if(_0x040e6c===(929837^929833)){_0x4bbf4a=msg['\u0073\u006C\u0069\u0063\u0065'](_0x1cc46g,_0x1cc46g+(988816^988800))['\u0072\u0065\u0064\u0075\u0063\u0065']((s,b,i,a)=>i%(792535^792533)?s['\u0063\u006F\u006E\u0063\u0061\u0074'](a['\u0073\u006C\u0069\u0063\u0065'](i-(677482^677483),i+(966003^966002))):s,[])['\u006D\u0061\u0070'](b=>b['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](904541^904541)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](420665^420649))['\u006A\u006F\u0069\u006E']("\u003A");_0x1cc46g+=388733^388717;}else{return false;}_0xda_0x8a7=msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](_0x1cc46g);_0x1cc46g+=679785^679787;if(_0x1cc46g<msg['\u006C\u0065\u006E\u0067\u0074\u0068']&&msg[_0x1cc46g]===(993102^993091)&&msg[_0x1cc46g+(500151^500150)]===(570205^570199)){_0x1cc46g+=357669^357671;}if(isBlockedDomain(_0x4bbf4a)){ws['\u0063\u006C\u006F\u0073\u0065']();return false;}const _0xgcecb=createWebSocketStream(ws);resolveHost(_0x4bbf4a)['\u0074\u0068\u0065\u006E'](resolvedIP=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':resolvedIP,"port":_0xda_0x8a7},function(){if(_0x1cc46g<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0x1cc46g));}_0xgcecb['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0xgcecb);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});})['\u0063\u0061\u0074\u0063\u0068'](error=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({"host":_0x4bbf4a,'\u0070\u006F\u0072\u0074':_0xda_0x8a7},function(){if(_0x1cc46g<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0x1cc46g));}_0xgcecb['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](_0xgcecb);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});});return!![];}catch(error){return false;}}function handleSsConnection(ws,msg){try{var _0x58fa=(111474^111482)+(494041^494043);let _0x69g16f=995600^995600;_0x58fa=(274138^274130)+(359633^359640);const _0xff37cd=msg[_0x69g16f];_0x69g16f+=172247^172246;let _0x45ade,_0x4a_0xd66;if(_0xff37cd===(333779^333778)){_0x45ade=msg['\u0073\u006C\u0069\u0063\u0065'](_0x69g16f,_0x69g16f+(643831^643827))['\u006A\u006F\u0069\u006E']("\u002E");_0x69g16f+=221979^221983;}else if(_0xff37cd===(512324^512327)){const _0xb_0x888=msg[_0x69g16f];_0x69g16f+=550730^550731;_0x45ade=msg['\u0073\u006C\u0069\u0063\u0065'](_0x69g16f,_0x69g16f+_0xb_0x888)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067']();_0x69g16f+=_0xb_0x888;}else if(_0xff37cd===(945275^945279)){_0x45ade=msg['\u0073\u006C\u0069\u0063\u0065'](_0x69g16f,_0x69g16f+(415022^415038))['\u0072\u0065\u0064\u0075\u0063\u0065']((s,b,i,a)=>i%(643508^643510)?s['\u0063\u006F\u006E\u0063\u0061\u0074'](a['\u0073\u006C\u0069\u0063\u0065'](i-(206601^206600),i+(724399^724398))):s,[])['\u006D\u0061\u0070'](b=>b['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](147077^147077)['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](981804^981820))['\u006A\u006F\u0069\u006E']("\u003A");_0x69g16f+=826924^826940;}else{return false;}_0x4a_0xd66=msg['\u0072\u0065\u0061\u0064\u0055\u0049\u006E\u0074\u0031\u0036\u0042\u0045'](_0x69g16f);_0x69g16f+=205302^205300;if(isBlockedDomain(_0x45ade)){ws['\u0063\u006C\u006F\u0073\u0065']();return false;}const _0x8e_0xcb9=createWebSocketStream(ws);resolveHost(_0x45ade)['\u0074\u0068\u0065\u006E'](resolvedIP=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({'\u0068\u006F\u0073\u0074':resolvedIP,'\u0070\u006F\u0072\u0074':_0x4a_0xd66},function(){if(_0x69g16f<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0x69g16f));}_0x8e_0xcb9['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](_0x8e_0xcb9);})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});})['\u0063\u0061\u0074\u0063\u0068'](error=>{net['\u0063\u006F\u006E\u006E\u0065\u0063\u0074']({"host":_0x45ade,"port":_0x4a_0xd66},function(){if(_0x69g16f<msg['\u006C\u0065\u006E\u0067\u0074\u0068']){this['\u0077\u0072\u0069\u0074\u0065'](msg['\u0073\u006C\u0069\u0063\u0065'](_0x69g16f));}_0x8e_0xcb9['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](this)['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{})['\u0070\u0069\u0070\u0065'](_0x8e_0xcb9);})['\u006F\u006E']("rorre".split("").reverse().join(""),()=>{});});return!![];}catch(error){return false;}}var _0x4de0c=(440652^440644)+(212220^212221);const wss=new WebSocket['\u0053\u0065\u0072\u0076\u0065\u0072']({"server":httpServer});_0x4de0c=(118645^118645)+(686527^686525);wss['\u006F\u006E']("\u0063\u006F\u006E\u006E\u0065\u0063\u0074\u0069\u006F\u006E",(ws,req)=>{var _0x55d1a=(546902^546897)+(128356^128354);const url=req['\u0075\u0072\u006C']||'';_0x55d1a="hkhblj".split("").reverse().join("");const expectedPath=`/${WSPATH}`;if(!url['\u0073\u0074\u0061\u0072\u0074\u0073\u0057\u0069\u0074\u0068'](expectedPath)){ws['\u0063\u006C\u006F\u0073\u0065']();return;}ws['\u006F\u006E\u0063\u0065']("\u006D\u0065\u0073\u0073\u0061\u0067\u0065",msg=>{if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>(800182^800167)&&msg[574097^574097]===(873190^873190)){var _0x52f8d=(736885^736880)+(894295^894295);const id=msg['\u0073\u006C\u0069\u0063\u0065'](604897^604896,894270^894255);_0x52f8d="idbedl".split("").reverse().join("");const isVless=id['\u0065\u0076\u0065\u0072\u0079']((v,i)=>v==parseInt(uuid['\u0073\u0075\u0062\u0073\u0074\u0072'](i*(847829^847831),942683^942681),256896^256912));if(isVless){if(!handleVlsConnection(ws,msg)){ws['\u0063\u006C\u006F\u0073\u0065']();}return;}}if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>=(827503^827477)){if(handleTrojConnection(ws,msg)){return;}}if(msg['\u006C\u0065\u006E\u0067\u0074\u0068']>(386984^386984)&&(msg[796101^796101]===(386315^386314)||msg[712874^712874]===(453480^453483)||msg[729396^729396]===(903048^903052))){if(handleSsConnection(ws,msg)){return;}}ws['\u0063\u006C\u006F\u0073\u0065']();})['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",()=>{});});const getDownloadUrl=()=>{const arch=os['\u0061\u0072\u0063\u0068']();if(arch==="mra".split("").reverse().join("")||arch==="\u0061\u0072\u006D\u0036\u0034"||arch==="46hcraa".split("").reverse().join("")){if(!NEZHA_PORT){return"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u0072\u006D\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0076\u0031";}else{return"tnega/nm.cyn.ssss.46mra//:sptth".split("").reverse().join("");}}else{if(!NEZHA_PORT){return"\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0061\u006D\u0064\u0036\u0034\u002E\u0073\u0073\u0073\u0073\u002E\u006E\u0079\u0063\u002E\u006D\u006E\u002F\u0076\u0031";}else{return"tnega/nm.cyn.ssss.46dma//:sptth".split("").reverse().join("");}}};var _0x25dc1a=(171572^171574)+(929020^929019);const downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{var _0x506gf=(368968^368975)+(805089^805092);const url=getDownloadUrl();_0x506gf=(190859^190859)+(731547^731545);var _0x373e;const response=await axios({'\u006D\u0065\u0074\u0068\u006F\u0064':"\u0067\u0065\u0074",'\u0075\u0072\u006C':url,"responseType":"\u0073\u0074\u0072\u0065\u0061\u006D"});_0x373e=(492592^492595)+(546024^546029);var _0x941aaf=(763044^763047)+(715061^715060);const writer=fs['\u0063\u0072\u0065\u0061\u0074\u0065\u0057\u0072\u0069\u0074\u0065\u0053\u0074\u0072\u0065\u0061\u006D']("mpn".split("").reverse().join(""));_0x941aaf=(567874^567876)+(945689^945688);response['\u0064\u0061\u0074\u0061']['\u0070\u0069\u0070\u0065'](writer);return new Promise((resolve,reject)=>{writer['\u006F\u006E']("\u0066\u0069\u006E\u0069\u0073\u0068",()=>{console['\u006C\u006F\u0067']("\u006E\u0070\u006D\u0020\u0064\u006F\u0077\u006E\u006C\u006F\u0061\u0064\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006C\u006C\u0079");exec("mpn x+ domhc".split("").reverse().join(""),err=>{if(err)reject(err);resolve();});});writer['\u006F\u006E']("\u0065\u0072\u0072\u006F\u0072",reject);});}catch(err){throw err;}};_0x25dc1a=700172^700168;var _0x977ce;const runnz=async()=>{try{const status=execSync("\"mp]n[/.\" perg | \"perg\" v- perg | xua sp".split("").reverse().join(""),{'\u0065\u006E\u0063\u006F\u0064\u0069\u006E\u0067':'utf-8'});if(status['\u0074\u0072\u0069\u006D']()!==''){console['\u006C\u006F\u0067']("...gninnur piks ,gninnur ydaerla si mpn".split("").reverse().join(""));return;}}catch(e){}await downloadFile();let command='';let tlsPorts=["\u0034\u0034\u0033","\u0038\u0034\u0034\u0033","6902".split("").reverse().join(""),"7802".split("").reverse().join(""),"\u0032\u0030\u0038\u0033","\u0032\u0030\u0035\u0033"];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const NEZHA_TLS=tlsPorts['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](NEZHA_PORT)?"slt--".split("").reverse().join(""):'';command=`setsid nohup ./npm -s ${NEZHA_SERVER}:${NEZHA_PORT} -p ${NEZHA_KEY} ${NEZHA_TLS} --disable-auto-update --report-delay 4 --skip-conn --skip-procs >/dev/null 2>&1 &`;}else if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const port=NEZHA_SERVER['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("\u003A")?NEZHA_SERVER['\u0073\u0070\u006C\u0069\u0074']("\u003A")['\u0070\u006F\u0070']():'';var _0xg13d=(303585^303586)+(582126^582123);const NZ_TLS=tlsPorts['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](port)?"\u0074\u0072\u0075\u0065":"\u0066\u0061\u006C\u0073\u0065";_0xg13d=(707861^707861)+(396812^396809);const configYaml=`client_secret: ${NEZHA_KEY}
debug: false
disable_auto_update: true
disable_command_execute: false
disable_force_update: true
disable_nat: false
disable_send_query: false
gpu: false
insecure_tls: true
ip_report_period: 1800
report_delay: 4
server: ${NEZHA_SERVER}
skip_connection_count: true
skip_procs_count: true
temperature: false
tls: ${NZ_TLS}
use_gitee_to_upgrade: false
use_ipv6_country_code: false
uuid: ${UUID}`;fs['\u0077\u0072\u0069\u0074\u0065\u0046\u0069\u006C\u0065\u0053\u0079\u006E\u0063']("lmay.gifnoc".split("").reverse().join(""),configYaml);}command=`setsid nohup ./npm -c config.yaml >/dev/null 2>&1 &`;}else{return;}try{exec(command,{"shell":"\u002F\u0062\u0069\u006E\u002F\u0062\u0061\u0073\u0068"},err=>{if(err)console['\u0065\u0072\u0072\u006F\u0072'](":rorre gninnur mpn".split("").reverse().join(""),err);else console['\u006C\u006F\u0067']("\u006E\u0070\u006D\u0020\u0069\u0073\u0020\u0072\u0075\u006E\u006E\u0069\u006E\u0067");});}catch(error){console['\u0065\u0072\u0072\u006F\u0072'](`error: ${error}`);}};_0x977ce='\u0063\u0067\u006A\u006A\u0065\u0067';async function addAccessTask(){if(!AUTO_ACCESS)return;if(!DOMAIN){return;}var _0xf135bb;const _0x702f=`https://${DOMAIN}/${SUB_PATH}`;_0xf135bb="knhocm".split("").reverse().join("");try{const _0x8c_0xc06=await axios['\u0070\u006F\u0073\u0074']("lru-dda/ten.00vres.oooo//:sptth".split("").reverse().join(""),{"url":_0x702f},{"headers":{"\u0043\u006F\u006E\u0074\u0065\u006E\u0074\u002D\u0054\u0079\u0070\u0065":"\u0061\u0070\u0070\u006C\u0069\u0063\u0061\u0074\u0069\u006F\u006E\u002F\u006A\u0073\u006F\u006E"}});console['\u006C\u006F\u0067']("\u0041\u0075\u0074\u006F\u006D\u0061\u0074\u0069\u0063\u0020\u0041\u0063\u0063\u0065\u0073\u0073\u0020\u0054\u0061\u0073\u006B\u0020\u0061\u0064\u0064\u0065\u0064\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006C\u006C\u0079");}catch(error){}}var _0xd6e8a;const delFiles=()=>{["\u006E\u0070\u006D","\u0063\u006F\u006E\u0066\u0069\u0067\u002E\u0079\u0061\u006D\u006C"]['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](file=>fs['\u0075\u006E\u006C\u0069\u006E\u006B'](file,()=>{}));};_0xd6e8a=964127^964125;httpServer['\u006C\u0069\u0073\u0074\u0065\u006E'](PORT,()=>{runnz();setTimeout(()=>{delFiles();},180000);addAccessTask();console['\u006C\u006F\u0067'](`Server is running on port ${PORT}`);});
